From 87f3da183a87f3ff5df854971a0c3bc2134ecd61 Mon Sep 17 00:00:00 2001
From: Ashod Nakashian <ashod.nakashian@collabora.co.uk>
Date: Tue, 5 Jun 2018 11:31:35 +0200
Subject: [PATCH 07/14] svx: improved text importing from PDF

---
 pdfium/fpdfsdk/fpdf_editpage.cpp | 9 +++++++--
 pdfium/public/fpdf_edit.h        | 6 +++++-
 2 files changed, 12 insertions(+), 3 deletions(-)

diff --git a/pdfium/fpdfsdk/fpdf_editpage.cpp b/pdfium/fpdfsdk/fpdf_editpage.cpp
index f8e2418..2249e8e 100644
--- a/pdfium/fpdfsdk/fpdf_editpage.cpp
+++ b/pdfium/fpdfsdk/fpdf_editpage.cpp
@@ -652,8 +652,11 @@ FPDFTextObj_GetMatrix(FPDF_PAGEOBJECT text_object,
                       double* a,
                       double* b,
                       double* c,
-                      double* d) {
-  if (!text_object)
+                      double* d,
+                      double* e,
+                      double* f)
+{
+  if (!text_object || !a || !b || !c || !d || !e || !f)
     return;
 
   CPDF_TextObject* pTxtObj = CPDFTextObjectFromFPDFPageObject(text_object);
@@ -662,6 +665,8 @@ FPDFTextObj_GetMatrix(FPDF_PAGEOBJECT text_object,
   *b = matrix.b;
   *c = matrix.c;
   *d = matrix.d;
+  *e = matrix.e;
+  *f = matrix.f;
 }
 
 FPDF_EXPORT int FPDF_CALLCONV
diff --git a/pdfium/public/fpdf_edit.h b/pdfium/public/fpdf_edit.h
index 89ec8cf..fc906f4 100644
--- a/pdfium/public/fpdf_edit.h
+++ b/pdfium/public/fpdf_edit.h
@@ -1038,12 +1038,16 @@ FPDFTextObj_GetFontSize(FPDF_PAGEOBJECT text_object);
 //   b            - Pointer to a double value receiving coefficient "b" of the matrix.
 //   c            - Pointer to a double value receiving coefficient "c" of the matrix.
 //   d            - Pointer to a double value receiving coefficient "d" of the matrix.
+//   e            - Pointer to a double value receiving coefficient "e" of the matrix.
+//   f            - Pointer to a double value receiving coefficient "f" of the matrix.
 FPDF_EXPORT void FPDF_CALLCONV
 FPDFTextObj_GetMatrix(FPDF_PAGEOBJECT text_object,
                       double* a,
                       double* b,
                       double* c,
-                      double* d);
+                      double* d,
+                      double* e,
+                      double* f);
 
 // Get the unicode of a special character in a text object.
 //
-- 
2.16.3

